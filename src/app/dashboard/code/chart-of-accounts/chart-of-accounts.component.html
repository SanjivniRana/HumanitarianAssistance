<!-- <form action="your-action" (submit)="onFormSubmit($event)">
  <dx-form id="form" [formData]="customer" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true" validationGroup="customerData">
    <dxi-item itemType="group" caption="Credentials">
      <dxi-item dataField="Login">
        <dxi-validation-rule type="required" message="Login is required">
        </dxi-validation-rule>
      </dxi-item>
      <dxi-item dataField="Password" [editorOptions]="{ mode: 'password' }">
        <dxi-validation-rule type="required" message="Password is required">
        </dxi-validation-rule>
      </dxi-item>

    </dxi-item>
  </dx-form>
</form> -->


<div class="row">
  <div class="col-sm-12">
    <div class="main-heading clearfix">
      <h3 class="page-heading">Manage Chart of Accounts</h3>
      <dx-button class="button-info btn btn-default btn-green" text="Add New" (onClick)="addChartOfAccount()">
      </dx-button>
      <br>
    </div>
  </div>
  <div class="col-sm-12">

    <!--  Chart of Accounts Filters -->
    <dx-tree-list id="employees" [dataSource]="mainLevelAccount" keyExpr="ID" parentIdExpr="ParentID" [showRowLines]="true" [columnAutoWidth]="true"
      [allowColumnReordering]="true" [allowColumnResizing]="true" [columnAutoWidth]="true" [expandedRowKeys]="[1]">
      <!-- <dxo-editing
        mode="popup"
        [allowAdding]="true"
        [allowUpdating]="true"
        [allowDeleting]="true">
    </dxo-editing> -->

      <!-- editing -->
      <dxo-editing mode="popup" [allowUpdating]="true" [form]="{
                items: ['AccountName','AccountCode','AccountType']}">

        <dxo-popup title="Chart of account" [showTitle]="true" [width]="700" [height]="345" [position]="{ my: 'center', at: 'center', of: window }">
        </dxo-popup>

      </dxo-editing>
      <!-- editing -->

      <dxo-selection mode="multiple">
      </dxo-selection>
      <!-- <dxo-column-chooser [enabled]="true" ></dxo-column-chooser> -->
      <dxo-filter-row [visible]="showFilterRow">
      </dxo-filter-row>
      <dxo-header-filter [visible]="true"></dxo-header-filter>
      <dxo-filter-row [visible]="true">
      </dxo-filter-row>
      <dxo-search-panel [visible]="true" [width]="240" placeholder="Search..."></dxo-search-panel>
      <!-- <dxi-column dataField="ID" caption="ID"></dxi-column>   -->
      <dxi-column dataField="AccountName">

      </dxi-column>
      <dxi-column dataField="AccountCode"></dxi-column>
      <dxi-column dataField="AccountType"></dxi-column>

    </dx-tree-list>
  </div>
</div>


<!-- Add chart of account -->
<dx-popup class="popup" [width]="800" [height]="800" [showTitle]="true" title="Chart Of Account" [dragEnabled]="false" [closeOnOutsideClick]="true"
  [(visible)]="popupVisibleEditChartOfAccount">
  <div *dxTemplate="let data of 'content'">

    <div class="dx-fieldset col-md-4 col-md-offset-4" style="margin-top: -10px;">
      <div class="dx-fieldset-header">Add Account Level</div>
      <div class="dx-field" style="max-width: 30rem;">
        <dx-lookup (onValueChanged)="accountLevelSelectedValue($event)" [items]="accountLevelDropdown" [value]="accountLevelDropdown[0]"
          displayExpr="AccountLevelName" [searchEnabled]="false" [showPopupTitle]="false" [closeOnOutsideClick]="true" title="Select Account">
        </dx-lookup>
      </div>
    </div>


    <br>

    <!-- Main Level Account -->
    <div *ngIf="formToggle==1">
      <form action="your-action" (submit)="onAddMainLevelAccount(fMainLevelAccount)"  >
        <dx-form id="form" [(formData)]="fMainLevelAccount" [colCount]="2" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true"
          validationGroup="customerData">

          <dxi-item dataField="AccountCode" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountName">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <!-- <dxi-item dataField="AccountType">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item> -->

          <dxi-item dataField="AccountType" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <!-- <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule> -->
          </dxi-item>

          <dxi-item dataField="ShowInList" editorType="dxCheckBox">
          </dxi-item>

          <dxi-item dataField="DonorMISCode" label="Donor MIS Code">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="DepMethod">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="Rate(%)" >
            <dxi-validation-rule type="required" >
            </dxi-validation-rule>
          </dxi-item>

          <!-- <dxi-item dataField="Voucher Type" editorType="dxSelectBox" [editorOptions]="{ dataSource: countries }">
        <dxi-validation-rule type="required">
        </dxi-validation-rule>
      </dxi-item> -->

        </dx-form>
        <br />
        <div class="btn-grp-wrap">
          <dx-button text="Save" type="success" validationGroup="customerData" [useSubmitBehavior]="true">
          </dx-button>

          <dx-button text="Cancel" (onClick)="cancelChartOfAccount()">
          </dx-button>
        </div>
      </form>

    </div>

    <!-- Control Level Account -->
    <div *ngIf="formToggle==2">

      <form action="your-action" (submit)="onAddControlLevelAccount(fControlLevelAccount)">
        <dx-form id="form" [(formData)]="fControlLevelAccount" [colCount]="2" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true"
          validationGroup="customerData">


          <dxi-item dataField="SelectMain" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule>
          </dxi-item>


          <dxi-item dataField="AccountCode" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountName">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountType" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <!-- <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule> -->
          </dxi-item>

          <dxi-item dataField="ShowInList" editorType="dxCheckBox">
          </dxi-item>

          <dxi-item dataField="DonorMISCode" label="Donor MIS Code">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="DepMethod">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="Rate(%)">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <!-- <dx-check-box [value]="true" [width]="80" text="Check"></dx-check-box> -->



        </dx-form>
        <br>
        <div class="btn-grp-wrap">
          <dx-button text="Save" type="success" validationGroup="customerData" [useSubmitBehavior]="true">
          </dx-button>

          <dx-button text="Cancel" (onClick)="cancelChartOfAccount()">
          </dx-button>
        </div>
      </form>

    </div>

    <!-- Sub Level Account -->
    <div *ngIf="formToggle==3">
      <form action="your-action" (submit)="onAddSubLevelAccount(fSubLevelAccount)">
        <dx-form id="form" [(formData)]="fSubLevelAccount" [colCount]="2" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true"
          validationGroup="customerData">

          <!-- <dxi-item dataField="MainAccountLevel" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item> -->

          <dxi-item dataField="MainAccountLevel" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '', disabled: true  }">
            <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="SelectMain" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <!-- <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule> -->
          </dxi-item>


          <dxi-item dataField="AccountCode" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountName">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountType" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <!-- <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule> -->
          </dxi-item>

          <dxi-item dataField="ShowInList" editorType="dxCheckBox">
          </dxi-item>

          <dxi-item dataField="DonorMISCode" label="Donor MIS Code">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="DepMethod">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="Rate(%)">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

        </dx-form>

        <br>
        <div class="btn-grp-wrap">
          <dx-button text="Save" type="success" validationGroup="customerData" [useSubmitBehavior]="true">
          </dx-button>

          <dx-button text="Cancel" (onClick)="cancelChartOfAccount()">
          </dx-button>
        </div>
      </form>

    </div>

    <!-- Input Level Account -->
    <div *ngIf="formToggle==4">

      <form action="your-action" (submit)="onAddInputLevelAccount(fInputLevelAccount)">
        <dx-form id="form" [(formData)]="fInputLevelAccount" [colCount]="2" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true"
          validationGroup="customerData">

          <!-- <dxi-item dataField="MainAccountLevel" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item> -->

          <dxi-item dataField="MainAccountLevel" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '', disabled: true  }">
            <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="ControlAccountLevel" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '', disabled: true  }">
            <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="SelectMain" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '', disabled: true  }">
            <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule>
          </dxi-item>


          <dxi-item dataField="AccountCode" [editorOptions]="{ disabled: true }">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountName">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="AccountType" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
            <!-- <dxi-validation-rule type="required" message="Position is required"></dxi-validation-rule> -->
          </dxi-item>

          <dxi-item dataField="ShowInList" editorType="dxCheckBox">
          </dxi-item>

          <dxi-item dataField="DonorMISCode" label="Donor MIS Code">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="DepMethod">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

          <dxi-item dataField="Rate(%)">
            <dxi-validation-rule type="required">
            </dxi-validation-rule>
          </dxi-item>

        </dx-form>

        <br />
        <div class="btn-grp-wrap">
          <dx-button text="Save" type="success" validationGroup="customerData" [useSubmitBehavior]="true">
          </dx-button>

          <dx-button text="Cancel" (onClick)="cancelChartOfAccount()">
          </dx-button>
        </div>
      </form>

    </div>

  </div>
</dx-popup>
<!-- Edit chart of account -->