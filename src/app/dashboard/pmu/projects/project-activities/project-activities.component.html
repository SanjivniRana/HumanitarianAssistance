
<div class="row">
  <div class="col-sm-12">
      <div class="main-heading clearfix">
            <h3 class="page-heading">Project Activities</h3>
            <dx-button
                  class="button-info btn btn-default btn-green"
                  text="Back" (onClick)="addProjectPMU()" [routerLink]="['../projects']">
            </dx-button>     
            <dx-button 
                  class="button-info btn btn-default btn-green" 
                  text="Add New" (onClick)="ShowPopup()">
            </dx-button>      
      </div>        
      <dx-data-grid 
        id="gridContainer" 
        [dataSource]="dataSource"
        [allowColumnReordering]="true"
        [allowColumnResizing]="true"
        [columnAutoWidth]="true">
        <dxo-paging [pageSize]="10"></dxo-paging>
        <dxo-column-chooser [enabled]="true" ></dxo-column-chooser>    
        <!-- <dxo-pager
          [allowedPageSizes]="[5, 8, 15, 30]"
          [showInfo]="true"
          [showNavigationButtons]="true"
          [showPageSizeSelector]="true"
          [visible]="true">
      </dxo-pager>  -->

      <!-- [form]="{
            items: ['ActivityDesc','PlannedStartDate','PlannedEndDate','BudgetLine','Resource','LocationOfActivity','TaskType']}" -->


        <!-- editing -->
        <dxo-editing mode="popup" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="false" >
          <dxo-popup title="Add/Edit PMU Activity Details" [showTitle]="true" [width]="700" [height]="345" [position]="{ my: 'center', at: 'center', of: window }">
          </dxo-popup>
        </dxo-editing>
        <!-- editing -->

        <dxo-filter-row 
            [visible]="true">
        </dxo-filter-row>
        <dxo-header-filter 
            [visible]="true"></dxo-header-filter>
        <dxo-search-panel 
            [visible]="true" 
            [width]="240" 
            placeholder="Search..."></dxo-search-panel>
        <dxi-column 
            dataField="ActivityDesc"                 
            caption="Activity Desc">
            <dxi-validation-rule type="required"></dxi-validation-rule>          
        </dxi-column>
        <dxi-column 
            dataField="PlannedStartDate" 
            caption="Planned Start Date" dataType="date">     
            <dxi-validation-rule type="required"></dxi-validation-rule>     
        </dxi-column>      
      <dxi-column 
            dataField="PlannedEndDate"
            caption="Planned End Date" dataType="date">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column dataField="BudgetLine">
            <dxi-validation-rule type="required"></dxi-validation-rule>
            <dxo-lookup
                [dataSource]="budgettypes"
                valueExpr="BudgetTypeId"
                displayExpr="BudgetTypeName">
            </dxo-lookup>
      </dxi-column>
      <dxi-column dataField="Resource">
            <dxi-validation-rule type="required"></dxi-validation-rule>
            <dxo-lookup
                [dataSource]="resourcetypes"
                valueExpr="ResourceTypeId"
                displayExpr="ResourceTypeName">
            </dxo-lookup>
      </dxi-column>
      <dxi-column dataField="LocationOfActivity" caption="Activity Location">
            <dxi-validation-rule type="required"></dxi-validation-rule>
            <dxo-lookup
                [dataSource]="activitylocationtypes"
                valueExpr="ActivityLocationTypeId"
                displayExpr="ActivityLocationTypeName">
            </dxo-lookup>
      </dxi-column>
      <dxi-column 
            dataField="ActualStartDate"
            caption="Actual Start Date" dataType="date">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="ActualEndDate"
            caption="Actual End Date" dataType="date">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="ImplementationMethod"
            caption="Implementation Method">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="Challenges"
            caption="Challenges">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="OvercomingChallenges"
            caption="Overcoming Challenges">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="DeviationJustification"
            caption="Deviation Justification">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="RecurringType"
            caption="Recurring Type">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="RecurringDay"
            caption="Recurring Day">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="RecurringMonth"
            caption="Recurring Month">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="Complete"
            caption="Complete">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column 
            dataField="Documents"
            caption="Documents">
            <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <!-- <dxi-column 
            dataField="TaskType"
            caption="Task Type">
            <dxi-validation-rule type="required"></dxi-validation-rule>
            <dx-radio-group
                  [dataSource]="tasks"
                  displayExpr="tasktype"
                  valueExpr="tasktypevalue"
                  value="SingleTask">
            </dx-radio-group>
            <div *dxTemplate="tasktype === 'SingleTask'"></div>
            <div *dxTemplate="tasktype === 'RecurringTask'">
                  <dxi-column  dataField="RecurringType"caption="Recurring Type">
                        <dx-radio-group
                              [dataSource]="recurringtasks"
                              displayExpr="recurringTaskType"
                              valueExpr="recurringTaskTypeValue"
                              value="Daily">
                        </dx-radio-group>
                  </dxi-column>
            </div>
      </dxi-column> -->
      
    </dx-data-grid>  
  </div>
</div>

<!-- Add Journal -->
<dx-popup class="popup" [width]="500" [height]="800" [showTitle]="true" title="Add Project Activities Details" [dragEnabled]="false" [closeOnOutsideClick]="true"
[(visible)]="popupAddActivitiesVisible">
<div *dxTemplate="let data of 'content'">
    <form action="your-action" (submit)="onFormSubmit(activitiesForm)">
        <dx-form id="form" [formData]="activitiesForm" [readOnly]="false" [showColonAfterLabel]="true" [showValidationSummary]="true" validationGroup="customerData">
            <dxi-item dataField="ActivityDesc" >
                <dxi-validation-rule type="required" message="Activity Description is required">
                </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="PlannedStartDate" >
                        <dxi-validation-rule type="required" message="Planned Start Date  is required">
                        </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="PlannedEndDate" >
                        <dxi-validation-rule type="required" message="Planned End Date  is required">
                        </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="BudgetLine" >
                        <dxi-validation-rule type="required" message="Budget Line is required">
                        </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="Resource" >
                        <dxi-validation-rule type="required" message="Resource is required">
                        </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="LocationOfActivity" >
                        <dxi-validation-rule type="required" message="Activity Location is required">
                        </dxi-validation-rule>
            </dxi-item>
            <dxi-item dataField="TaskType" >
                        <dxi-validation-rule type="required" message="Task Type is required">
                        </dxi-validation-rule>
            </dxi-item>
            
        </dx-form>
        <br />
        <div class="btn-grp-wrap">
            <dx-button text="Add" type="success" validationGroup="customerData" [useSubmitBehavior]="true">
            </dx-button>
            <dx-button text="Cancel" (onClick)="HidePopup()">
            </dx-button>
        </div>
    </form>
</div>
</dx-popup>